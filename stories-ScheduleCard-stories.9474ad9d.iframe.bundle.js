"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[270],{"./src/components/DetailCard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>__WEBPACK_DEFAULT_EXPORT__});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),_Text__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),__webpack_require__("./src/components/Text.tsx"));const DetailCard=({title,subtitle,address,hours,rating,imageUrl,attractionData,onUpdate})=>(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"flex flex-col border-2 border-gray-300 rounded-2xl shadow-lg bg-[#F8F8F8] w-[880px] h-[208px] hover:border-[#9A77FF] transition-colors duration-200",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex p-6 gap-4",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-6 h-full flex flex-col items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"/icons/Handle Desktop.svg",alt:"icon",className:"w-6 h-6 object-contain"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex flex-col gap-2 w-[456px] h-[160px]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_2__.A,{textStyle:"heading1",className:"font-bold truncate overflow-hidden whitespace-nowrap",children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_2__.A,{textStyle:"headline2",className:"text-[#9A77FF] truncate overflow-hidden whitespace-nowrap",children:subtitle}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"/icons/Location.svg",alt:"address icon",className:"w-5 h-5"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_2__.A,{textStyle:"body1",className:"text-gray-700",children:address})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"/icons/Clock.svg",alt:"hours icon",className:"w-5 h-5"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_2__.A,{textStyle:"body1",className:"text-gray-700",children:hours})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxs)("div",{className:"flex items-center gap-2",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"/icons/Star.svg",alt:"rating icon",className:"w-5 h-5"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(_Text__WEBPACK_IMPORTED_MODULE_2__.A,{textStyle:"body1",className:"text-gray-700",children:rating})]})]}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-[280px] h-[160px] overflow-hidden rounded-2xl",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:imageUrl&&""!==imageUrl.trim()?imageUrl:"https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=5dc87836-b647-45ef-ae17-e3247f91b8b4",alt:title,className:"object-cover w-full h-full"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("div",{className:"w-6 h-full flex flex-col items-center gap-2",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)("img",{src:"/icons/ReSet.svg",alt:"icon",className:"w-6 h-6 object-contain cursor-pointer",onClick:()=>{onUpdate({...attractionData,name:title,address,description:subtitle,businessTime:hours,rating,coverImage:imageUrl})}})})]})}),__WEBPACK_DEFAULT_EXPORT__=DetailCard;DetailCard.__docgenInfo={description:"",methods:[],displayName:"DetailCard",props:{title:{required:!0,tsType:{name:"string"},description:""},subtitle:{required:!0,tsType:{name:"string"},description:""},address:{required:!0,tsType:{name:"string"},description:""},hours:{required:!0,tsType:{name:"string"},description:""},rating:{required:!0,tsType:{name:"number"},description:""},imageUrl:{required:!0,tsType:{name:"string"},description:""},attractionData:{required:!0,tsType:{name:"Attraction"},description:""},onUpdate:{required:!0,tsType:{name:"signature",type:"function",raw:"(attraction: Attraction) => void",signature:{arguments:[{type:{name:"Attraction"},name:"attraction"}],return:{name:"void"}}},description:""}}}},"./src/components/Text.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>Text});var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js");const TEXT_STYLES={display1:"text-[56px] leading-[72px] tracking-[-0.0316em]",display2:"text-[40px] leading-[52px] tracking-[-0.0282em]",title1:"text-[36px] leading-[48px] tracking-[-0.0272em]",title2:"text-[28px] leading-[38px] tracking-[-0.0236em]",title3:"text-[24px] leading-[32px] tracking-[-0.0232em]",heading1:"text-[22px] leading-[30px] tracking-[-0.0176em]",heading2:"text-[20px] leading-[28px] tracking-[-0.012em]",headline1:"text-[18px] leading-[26px] tracking-[-0.002em]",headline2:"text-[17px] leading-[24px] tracking-[0em]",body1:"text-[16px] leading-[24px] tracking-[0.0057em]",body1Reading:"text-[16px] leading-[28px] tracking-[0.0057em]",body2:"text-[15px] leading-[22px] tracking-[0.0069em]",body2Reading:"text-[15px] leading-[26px] tracking-[0.0069em]",label1:"text-[14px] leading-[20px] tracking-[0.0145em]",label1Reading:"text-[14px] leading-[22px] tracking-[0.0145em]",label2:"text-[12px] leading-[18px] tracking-[0.0156em]",caption1:"text-[12px] leading-[16px] tracking-[0.0137em]",caption2:"text-[10px] leading-[14px] tracking-[0.0137em]"};function Text({as,textStyle="body1",className="",children,...props}){const Component=as||"span";var _TEXT_STYLES_textStyle;const styleClass=null!==(_TEXT_STYLES_textStyle=TEXT_STYLES[textStyle])&&void 0!==_TEXT_STYLES_textStyle?_TEXT_STYLES_textStyle:"";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__.jsx)(Component,{className:`${styleClass} ${className}`,...props,children})}Text.__docgenInfo={description:"",methods:[],displayName:"Text",props:{as:{required:!1,tsType:{name:"T"},description:""},textStyle:{required:!1,tsType:{name:"union",raw:"keyof typeof TEXT_STYLES",elements:[{name:"literal",value:"display1"},{name:"literal",value:"display2"},{name:"literal",value:"title1"},{name:"literal",value:"title2"},{name:"literal",value:"title3"},{name:"literal",value:"heading1"},{name:"literal",value:"heading2"},{name:"literal",value:"headline1"},{name:"literal",value:"headline2"},{name:"literal",value:"body1"},{name:"literal",value:"body1Reading"},{name:"literal",value:"body2"},{name:"literal",value:"body2Reading"},{name:"literal",value:"label1"},{name:"literal",value:"label1Reading"},{name:"literal",value:"label2"},{name:"literal",value:"caption1"},{name:"literal",value:"caption2"}]},description:"",defaultValue:{value:'"body1"',computed:!1}},className:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'""',computed:!1}},children:{required:!0,tsType:{name:"ReactNode"},description:""}}}},"./src/lib/api/itinerary.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{gJ:()=>changeAttraction,VX:()=>getPublicItineraries,o9:()=>getRecommendText,RR:()=>getRecommendedDestinations});var axios=__webpack_require__("./node_modules/axios/lib/axios.js"),useAuthStore=__webpack_require__("./src/store/useAuthStore.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");var process=__webpack_require__("./node_modules/process/browser.js"),axiosInstance_console=__webpack_require__("./node_modules/console-browserify/index.js");const backendUrl=process.env.NEXT_PUBLIC_API_BASE_URL,axiosInstance_axiosInstance=axios.A.create({baseURL:backendUrl,headers:{"Content-Type":"application/json"},withCredentials:!0});axiosInstance_axiosInstance.interceptors.request.use((config=>{const{user}=useAuthStore.n.getState();return(null==user?void 0:user.accessToken)&&(config.headers.Authorization=`Bearer ${user.accessToken}`),config}),(error=>Promise.reject(error))),axiosInstance_axiosInstance.interceptors.response.use((response=>response),(async error=>{const originalRequest=error.config;if(originalRequest.url.includes("/auth/token/reissue"))return axiosInstance_console.warn("🛑 토큰 재발급 요청은 인터셉터에서 무시합니다."),Promise.reject(error);if(!useAuthStore.n.getState().isLoggedIn)return axiosInstance_console.warn("🔒 로그아웃 상태입니다. 요청 중단"),Promise.reject(error);if(401===error.response.status&&!originalRequest._retry){originalRequest._retry=!0,axiosInstance_console.warn("🔄 401 발생, 토큰 재발급 시도 중...");const newAccessToken=await(async()=>{try{const response=await api_axiosInstance.post("/auth/token/reissue");if(200===response.status){const{accessToken,userName,expiresIn}=response.data;return useAuthStore.n.getState().login({userName,accessToken,expiresIn}),console.log("🔄 토큰 재발급 성공"),response.data}return console.error("❌ 토큰 재발급 실패"),useAuthStore.n.getState().logout(),null}catch(error){return console.error("토큰 재발급 중 오류 발생:",error),useAuthStore.n.getState().logout(),null}})();if(newAccessToken)return axiosInstance_console.log(newAccessToken),axiosInstance_console.log("✅ 토큰 재발급 성공, 요청 재시도"),originalRequest.headers.Authorization=`Bearer ${newAccessToken}`,axiosInstance_axiosInstance(originalRequest);axiosInstance_console.log("Test"),axiosInstance_console.error("❌ 토큰 재발급 실패, 로그아웃 처리"),useAuthStore.n.getState().logout(),window.location.href="/main"}return Promise.reject(error)}));const api_axiosInstance=axiosInstance_axiosInstance,getRecommendedDestinations=async data=>{try{return(await api_axiosInstance.get("/itinerary/preview",{params:data})).data}catch(error){var _error_response;throw new Error((null===(_error_response=error.response)||void 0===_error_response?void 0:_error_response.data.message)||"추천 장소를 불러오지 못했습니다.")}},getPublicItineraries=async limit=>{try{return(await api_axiosInstance.get(`/itinerary/public?limit=${limit}`)).data}catch(error){var _error_response;throw new Error((null===(_error_response=error.response)||void 0===_error_response?void 0:_error_response.data.message)||"공개된 여행 코스 목록을 불러오지 못했습니다.")}},getRecommendText=async(params="")=>{try{return(await api_axiosInstance.get("/itinerary/recommend/text",{params:{input:params}})).data}catch(err){var _err_response;throw new Error((null===(_err_response=err.response)||void 0===_err_response?void 0:_err_response.data.message)||"여행테마 추천 검색어 불러오기에 실패했습니다.")}},changeAttraction=async data=>{try{return(await api_axiosInstance.post("/itinerary/change/attraction",data)).data}catch(error){var _error_response;throw new Error((null===(_error_response=error.response)||void 0===_error_response?void 0:_error_response.data.message)||"관광지 정보를 변경하지 못했습니다.")}}},"./src/store/useAuthStore.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>useAuthStore});var zustand__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/zustand/esm/react.mjs"),zustand_middleware__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/zustand/esm/middleware.mjs");const useAuthStore=(0,zustand__WEBPACK_IMPORTED_MODULE_0__.v)()((0,zustand_middleware__WEBPACK_IMPORTED_MODULE_1__.Zr)((set=>({isLoggedIn:!1,user:null,hasHydrated:!1,setHasHydrated:value=>set({hasHydrated:value}),login:user=>set({isLoggedIn:!0,user}),logout:()=>{set({isLoggedIn:!1,user:null})}})),{name:"auth-storage",onRehydrateStorage:()=>state=>{null==state||state.setHasHydrated(!0)}}))},"./src/stories/ScheduleCard.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{EmptyPlaces:()=>EmptyPlaces,Primary:()=>Primary,SinglePlace:()=>SinglePlace,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ScheduleCard_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),DetailCard=__webpack_require__("./src/components/DetailCard.tsx"),Text=__webpack_require__("./src/components/Text.tsx"),Group=__webpack_require__("./node_modules/framer-motion/dist/es/components/Reorder/Group.mjs"),Item=__webpack_require__("./node_modules/framer-motion/dist/es/components/Reorder/Item.mjs"),itinerary=__webpack_require__("./src/lib/api/itinerary.ts"),console=__webpack_require__("./node_modules/console-browserify/index.js");const DayScheduleCard=({dailySchedule,onReorder})=>{var _contentRef_current;const[isExpanded,setIsExpanded]=(0,react.useState)(!0),[items,setItems]=(0,react.useState)(dailySchedule.attractions),contentRef=(0,react.useRef)(null),handleUpdateAttraction=async updatedAttraction=>{console.log(items),console.log(updatedAttraction);try{const response=await(0,itinerary.gJ)(updatedAttraction),updatedItems=items.map((item=>item.name===updatedAttraction.name?response:item));console.log(response),setItems(updatedItems),onReorder(updatedItems)}catch(error){console.error("업데이트 실패:",error)}};return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2 w-[880px]",children:[(0,jsx_runtime.jsxs)("div",{className:"w-[880px] h-[50px] flex items-center justify-between p-[12px_24px] bg-[#F3EEFF] text-black rounded-xl",children:[(0,jsx_runtime.jsxs)(Text.A,{textStyle:"headline1",className:"font-bold",children:[dailySchedule.dayDate,"일 차"]}),(0,jsx_runtime.jsx)("button",{onClick:()=>{setIsExpanded(!isExpanded)},className:"w-[28px] h-[28px] transition",children:isExpanded?(0,jsx_runtime.jsx)("img",{src:"/icons/Chevron Down.svg",alt:"expand",className:"w-full h-full"}):(0,jsx_runtime.jsx)("img",{src:"/icons/Chevron Right.svg",alt:"collapse",className:"w-full h-full"})})]}),(0,jsx_runtime.jsx)("div",{ref:contentRef,style:{height:isExpanded?`${null===(_contentRef_current=contentRef.current)||void 0===_contentRef_current?void 0:_contentRef_current.scrollHeight}px`:"0px",overflow:"hidden",transition:"height 0.3s ease"},children:(0,jsx_runtime.jsx)(Group.x,{axis:"y",values:items,onReorder:newOrder=>{setItems(newOrder),onReorder(newOrder)},className:"flex flex-col gap-2",children:items.map(((place,index)=>{var _place_id;return(0,jsx_runtime.jsx)(Item.N,{value:place,children:(0,jsx_runtime.jsxs)("div",{className:"relative flex flex-col gap-2",children:[(0,jsx_runtime.jsx)(DetailCard.A,{title:place.name,subtitle:`${place.type} / ${place.description}`,address:place.address,hours:place.businessTime,rating:place.rating,imageUrl:place.coverImage,attractionData:place,onUpdate:handleUpdateAttraction}),index<items.length-1&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center w-full pl-[60px] pr-[60px] py-[4px] gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"w-[2px] h-[40px] bg-[url('/icons/DotLine.svg')] bg-repeat-y bg-center"}),place.travelWalkTime&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("img",{src:"/icons/Walk.svg",alt:"walk icon",className:"w-5 h-5"}),(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:place.travelWalkTime})]}),place.travelWalkTime&&place.travelCarTime&&(0,jsx_runtime.jsx)("div",{className:"w-5 h-5 bg-[url('/icons/Dot.svg')] bg-contain bg-no-repeat"}),place.travelCarTime&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("img",{src:"/icons/Car.svg",alt:"car icon",className:"w-5 h-5"}),(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:place.travelCarTime})]}),place.travelCarTime&&place.travelDistance&&(0,jsx_runtime.jsx)("div",{className:"w-5 h-5 bg-[url('/icons/Dot.svg')] bg-contain bg-no-repeat"}),place.travelDistance&&(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:place.travelDistance})})]})]})},null!==(_place_id=place.id)&&void 0!==_place_id?_place_id:place.name)}))})})]})},ScheduleCard=DayScheduleCard;DayScheduleCard.__docgenInfo={description:"",methods:[],displayName:"DayScheduleCard",props:{dailySchedule:{required:!0,tsType:{name:"DailyScheduleDtos"},description:""},onReorder:{required:!0,tsType:{name:"signature",type:"function",raw:"(newOrder: Attraction[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"Attraction"}],raw:"Attraction[]"},name:"newOrder"}],return:{name:"void"}}},description:""}}};const ScheduleCard_stories={title:"Example/DayScheduleCard",component:ScheduleCard,tags:["autodocs"]},Primary={args:{dayNumber:1,places:[{title:"강릉짬뽕순두부 동화가든 본점",subtitle:"두부요리 / 예약필수",address:"강원 강릉시 강동면 순두부길 77번길 15 동화가든",hours:"매일 07:00 ~ 19:30",rating:4.68,imageUrl:"https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=5dc87836-b647-45ef-ae17-e3247f91b8b4",travelWalkTime:"10분",travelCarTime:"5분",travelDistance:"1.2km"},{title:"오죽헌",subtitle:"입장료 있음 / 운영시간 1시간 전 입장 마감",address:"강원 강릉시 율곡로3139번길 24 오죽헌",hours:"09:00 ~ 18:00",rating:4.68,imageUrl:"https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=2df9d7f5-bd90-41e5-a59b-334a13f85d7e",travelWalkTime:"15분",travelCarTime:"5분",travelDistance:"1.2km"},{title:"경포해변",subtitle:"강릉시에 있는 동해안 최대의 해변",address:"강원 강릉시 강문동 산1",hours:"00:00 ~ 24:00 상시이용 가능",rating:4.41,imageUrl:"https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=8ef7b330-fbb0-44c7-94a4-85b2729ff251"}]}},EmptyPlaces={args:{dayNumber:2,places:[]}},SinglePlace={args:{dayNumber:1,places:[{title:"강릉짬뽕순두부 동화가든 본점",subtitle:"두부요리 / 예약필수",address:"강원 강릉시 강동면 순두부길 77번길 15 동화가든",hours:"매일 07:00 ~ 19:30",rating:4.68,imageUrl:"https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=5dc87836-b647-45ef-ae17-e3247f91b8b4"}]}},__namedExportsOrder=["Primary","EmptyPlaces","SinglePlace"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"{\n  args: {\n    dayNumber: 1,\n    places: placesData\n  }\n}",...Primary.parameters?.docs?.source}}},EmptyPlaces.parameters={...EmptyPlaces.parameters,docs:{...EmptyPlaces.parameters?.docs,source:{originalSource:"{\n  args: {\n    dayNumber: 2,\n    places: []\n  }\n}",...EmptyPlaces.parameters?.docs?.source}}},SinglePlace.parameters={...SinglePlace.parameters,docs:{...SinglePlace.parameters?.docs,source:{originalSource:'{\n  args: {\n    dayNumber: 1,\n    places: [{\n      title: "강릉짬뽕순두부 동화가든 본점",\n      subtitle: "두부요리 / 예약필수",\n      address: "강원 강릉시 강동면 순두부길 77번길 15 동화가든",\n      hours: "매일 07:00 ~ 19:30",\n      rating: 4.68,\n      imageUrl: "https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=5dc87836-b647-45ef-ae17-e3247f91b8b4"\n    }]\n  }\n}',...SinglePlace.parameters?.docs?.source}}}}}]);