"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[270],{"./src/components/DetailCard.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>components_DetailCard});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),Text=__webpack_require__("./src/components/Text.tsx"),useRecommendTravelStore=__webpack_require__("./src/store/useRecommendTravelStore.ts"),itinerary=__webpack_require__("./src/lib/api/itinerary.ts"),next_image=__webpack_require__("./node_modules/@storybook/nextjs/dist/images/next-image.mjs");function Tooltip({text,direction="bottom",children}){const iconRef=(0,react.useRef)(null),tooltipRef=(0,react.useRef)(null),[position,setPosition]=(0,react.useState)({top:0,left:0}),[visible,setVisible]=(0,react.useState)(!1),[isFlipped,setIsFlipped]=(0,react.useState)(!1),isTop="top"===direction;return(0,react.useEffect)((()=>{if(!visible||!iconRef.current||!tooltipRef.current)return;const iconRect=iconRef.current.getBoundingClientRect(),tooltipRect=tooltipRef.current.getBoundingClientRect(),main=document.querySelector("main"),mainRect=null==main?void 0:main.getBoundingClientRect();let left=iconRect.left;const top=isTop?iconRect.top-tooltipRect.height-4:iconRect.bottom+4;let flipped=!1;mainRect&&left+tooltipRect.width>mainRect.right&&(left=iconRect.right-tooltipRect.width,flipped=!0),setPosition({top,left}),setIsFlipped(flipped)}),[visible,isTop]),(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{ref:iconRef,className:"inline-block",onMouseEnter:()=>setVisible(!0),onMouseLeave:()=>setVisible(!1),children}),visible&&(0,jsx_runtime.jsxs)("div",{ref:tooltipRef,className:"fixed z-50 flex flex-col items-start",style:{top:position.top,left:position.left},children:[isTop&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)("div",{className:"w-fit h-[40px] px-3 flex items-center rounded-lg bg-gradient-to-r from-[#9A77FF] to-[#4D6FFF] text-white text-xs font-semibold whitespace-nowrap",children:text}),(0,jsx_runtime.jsx)(next_image.A,{src:"/icons/Arrow.svg",alt:"arrow",width:24,height:8,className:"rotate-180 mt-[-2px] "+(isFlipped?"self-end":"self-start")})]}),!isTop&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(next_image.A,{src:"/icons/Arrow.svg",alt:"arrow",width:24,height:8,className:"mb-[-2px] "+(isFlipped?"self-end":"self-start")}),(0,jsx_runtime.jsx)("div",{className:"w-fit h-[40px] px-3 flex items-center rounded-lg bg-gradient-to-r from-[#9A77FF] to-[#4D6FFF] text-white text-xs font-semibold whitespace-nowrap",children:text})]})]})]})}Tooltip.__docgenInfo={description:"",methods:[],displayName:"Tooltip",props:{text:{required:!0,tsType:{name:"string"},description:""},direction:{required:!1,tsType:{name:"union",raw:"'top' | 'bottom'",elements:[{name:"literal",value:"'top'"},{name:"literal",value:"'bottom'"}]},description:"",defaultValue:{value:"'bottom'",computed:!1}},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""}}};var console=__webpack_require__("./node_modules/console-browserify/index.js");const DetailCard=({title,subtitle,address,hours,rating,imageUrl,attractionData})=>{const updateAttraction=(0,useRecommendTravelStore.w1)((state=>state.updateAttraction)),[isLoading,setIsLoading]=(0,react.useState)(!1);return isLoading?(0,jsx_runtime.jsx)("div",{className:"rounded-[16px] animate-pulse bg-[#F9F9F9] mb-2 flex",children:(0,jsx_runtime.jsxs)("div",{className:"flex p-6 gap-4",children:[(0,jsx_runtime.jsx)("div",{className:"w-6 h-full flex flex-col items-center gap-2",children:(0,jsx_runtime.jsx)("img",{src:"/icons/Handle Desktop.svg",alt:"icon",className:"w-6 h-6 object-contain"})}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col justify-between gap-2 w-[456px] h-[160px]",children:[(0,jsx_runtime.jsx)("div",{className:"bg-[#EEEEEE] rounded-[4px] w-[45%] h-[30px]"}),(0,jsx_runtime.jsx)("div",{className:"w-[55%] bg-[#EEEEEE] h-[26px] rounded-[4px]"}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)("div",{className:"bg-[#EEEEEE] h-[20px] w-[20px] rounded-[4px] mr-1.5"}),(0,jsx_runtime.jsx)("div",{className:"bg-[#EEEEEE] h-[20px] w-[70%] rounded-[4px]"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)("div",{className:"bg-[#EEEEEE] h-[20px] w-[20px] rounded-[4px] mr-1.5"}),(0,jsx_runtime.jsx)("div",{className:"bg-[#EEEEEE] h-[20px] w-[70%] rounded-[4px]"})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center",children:[(0,jsx_runtime.jsx)("div",{className:"bg-[#EEEEEE] h-[20px] w-[20px] rounded-[4px] mr-1.5"}),(0,jsx_runtime.jsx)("div",{className:"bg-[#EEEEEE] h-[20px] w-[70%] rounded-[4px]"})]})]}),(0,jsx_runtime.jsx)("div",{className:"w-[280px] h-[160px] overflow-hidden rounded-2xl",children:(0,jsx_runtime.jsx)("div",{className:"w-full h-full bg-[#EEEEEE]"})}),(0,jsx_runtime.jsx)("div",{className:"w-6 h-full flex flex-col items-center gap-2",children:(0,jsx_runtime.jsx)("img",{src:"/icons/Re_Request.svg",alt:"icon",className:"w-6 h-6 object-contain cursor-pointer"})})]})}):(0,jsx_runtime.jsx)("div",{className:"flex flex-col border-2 border-transparent rounded-2xl shadow-lg bg-[#F8F8F8] w-[880px] h-[208px] hover:border-[#9A77FF] transition-colors duration-200",children:(0,jsx_runtime.jsxs)("div",{className:"flex p-6 gap-4",children:[(0,jsx_runtime.jsx)("div",{className:"w-6 h-full flex flex-col items-center gap-2",children:(0,jsx_runtime.jsx)(Tooltip,{text:"드래그해서 일정 순서를 바꿀 수 있어요!",direction:"top",children:(0,jsx_runtime.jsx)("img",{src:"/icons/Handle Desktop.svg",alt:"handle",className:"w-6 h-6 object-contain cursor-grab"})})}),(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2 w-[456px] h-[160px]",children:[(0,jsx_runtime.jsx)(Text.A,{textStyle:"heading1",className:"font-bold truncate overflow-hidden whitespace-nowrap",children:title}),(0,jsx_runtime.jsx)(Text.A,{textStyle:"headline2",className:"text-[#9A77FF] truncate overflow-hidden whitespace-nowrap",children:subtitle}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("img",{src:"/icons/Location.svg",alt:"address icon",className:"w-5 h-5"}),(0,jsx_runtime.jsx)(Text.A,{textStyle:"body1",className:"text-gray-700",children:address})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("img",{src:"/icons/Clock.svg",alt:"hours icon",className:"w-5 h-5"}),(0,jsx_runtime.jsx)(Text.A,{textStyle:"body1",className:"text-gray-700 truncate",children:hours})]}),(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("img",{src:"/icons/Star.svg",alt:"rating icon",className:"w-5 h-5"}),(0,jsx_runtime.jsx)(Text.A,{textStyle:"body1",className:"text-gray-700",children:rating})]})]}),(0,jsx_runtime.jsx)("div",{className:"w-[280px] h-[160px] overflow-hidden rounded-2xl",children:(0,jsx_runtime.jsx)("img",{src:imageUrl&&""!==imageUrl.trim()?imageUrl:"https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=5dc87836-b647-45ef-ae17-e3247f91b8b4",alt:title,className:"object-cover w-full h-full"})}),(0,jsx_runtime.jsxs)("div",{className:"w-6 h-full flex flex-col items-center gap-2",children:[(0,jsx_runtime.jsx)(Tooltip,{text:"비슷한 다른 장소를 추천 받을 수 있어요!",direction:"top",children:(0,jsx_runtime.jsx)("img",{src:"/icons/Re_Request.svg",alt:"ReRequest icon",className:"w-6 h-6 object-contain cursor-pointer",onClick:async()=>{try{const updatedAttraction={...attractionData,name:title,address,description:subtitle,businessTime:hours,rating,coverImage:imageUrl};setIsLoading(!0);const response=await(0,itinerary.gJ)(updatedAttraction);updateAttraction(attractionData,response),setIsLoading(!1)}catch(error){console.error("업데이트 실패:",error)}}})}),attractionData.previousData&&(0,jsx_runtime.jsx)(Tooltip,{text:"처음 추천받았던 장소로 되돌릴 수 있어요!",children:(0,jsx_runtime.jsx)("img",{src:"/icons/Reset.svg",alt:"Reset icon",className:"w-6 h-6 object-contain cursor-pointer",onClick:()=>{attractionData.previousData&&updateAttraction(attractionData,attractionData.previousData)}})})]})]})})},components_DetailCard=DetailCard;DetailCard.__docgenInfo={description:"",methods:[],displayName:"DetailCard",props:{title:{required:!0,tsType:{name:"string"},description:""},subtitle:{required:!0,tsType:{name:"string"},description:""},address:{required:!0,tsType:{name:"string"},description:""},hours:{required:!0,tsType:{name:"string"},description:""},rating:{required:!0,tsType:{name:"number"},description:""},imageUrl:{required:!0,tsType:{name:"string"},description:""},attractionData:{required:!0,tsType:{name:"Attraction"},description:""}}}},"./src/stories/ScheduleCard.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{EmptyPlaces:()=>EmptyPlaces,Primary:()=>Primary,SinglePlace:()=>SinglePlace,__namedExportsOrder:()=>__namedExportsOrder,default:()=>ScheduleCard_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js"),DetailCard=__webpack_require__("./src/components/DetailCard.tsx"),Text=__webpack_require__("./src/components/Text.tsx"),Group=__webpack_require__("./node_modules/framer-motion/dist/es/components/Reorder/Group.mjs"),Item=__webpack_require__("./node_modules/framer-motion/dist/es/components/Reorder/Item.mjs"),useRecommendTravelStore=__webpack_require__("./src/store/useRecommendTravelStore.ts"),debounce=__webpack_require__("./node_modules/lodash/debounce.js"),debounce_default=__webpack_require__.n(debounce);const DayScheduleCard=({dailySchedule})=>{var _contentRef_current;const[isExpanded,setIsExpanded]=(0,react.useState)(!0),contentRef=(0,react.useRef)(null),updateItinerary=(0,useRecommendTravelStore.w1)((state=>state.updateItinerary)),handleReorder=(0,react.useCallback)(debounce_default()((newOrder=>{updateItinerary([{...dailySchedule,attractions:newOrder}])}),300),[dailySchedule]);return(0,jsx_runtime.jsxs)("div",{className:"flex flex-col gap-2 w-[880px]",children:[(0,jsx_runtime.jsxs)("div",{className:"w-[880px] h-[50px] flex items-center justify-between p-[12px_24px] bg-[#F3EEFF] text-black rounded-xl",children:[(0,jsx_runtime.jsxs)(Text.A,{textStyle:"headline1",className:"font-bold",children:[dailySchedule.dayDate,"일 차"]}),(0,jsx_runtime.jsx)("button",{onClick:()=>{setIsExpanded(!isExpanded)},className:"w-[28px] h-[28px] transition",children:isExpanded?(0,jsx_runtime.jsx)("img",{src:"/icons/Chevron Down.svg",alt:"expand",className:"w-full h-full"}):(0,jsx_runtime.jsx)("img",{src:"/icons/Chevron Right.svg",alt:"collapse",className:"w-full h-full"})})]}),(0,jsx_runtime.jsx)("div",{ref:contentRef,style:{height:isExpanded?`${null===(_contentRef_current=contentRef.current)||void 0===_contentRef_current?void 0:_contentRef_current.scrollHeight}px`:"0px",overflow:"hidden",transition:"height 0.3s ease"},children:(0,jsx_runtime.jsx)(Group.x,{axis:"y",values:dailySchedule.attractions,onReorder:handleReorder,className:"flex flex-col gap-2",children:dailySchedule.attractions.map(((place,index)=>(0,jsx_runtime.jsx)(Item.N,{value:place,children:(0,jsx_runtime.jsxs)("div",{className:"relative flex flex-col gap-2",children:[(0,jsx_runtime.jsx)(DetailCard.A,{title:place.name,subtitle:place.description,address:place.address,hours:place.businessTime,rating:place.rating,imageUrl:place.coverImage,attractionData:place}),index<dailySchedule.attractions.length-1&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center w-full pl-[60px] pr-[60px] py-[4px] gap-2",children:[(0,jsx_runtime.jsx)("div",{className:"w-[2px] h-[40px] bg-[url('/icons/DotLine.svg')] bg-repeat-y bg-center"}),place.travelWalkTime&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("img",{src:"/icons/Walk.svg",alt:"walk icon",className:"w-5 h-5"}),(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:place.travelWalkTime})]}),place.travelWalkTime&&place.travelCarTime&&(0,jsx_runtime.jsx)("div",{className:"w-5 h-5 bg-[url('/icons/Dot.svg')] bg-contain bg-no-repeat"}),place.travelCarTime&&(0,jsx_runtime.jsxs)("div",{className:"flex items-center gap-2",children:[(0,jsx_runtime.jsx)("img",{src:"/icons/Car.svg",alt:"car icon",className:"w-5 h-5"}),(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:place.travelCarTime})]}),place.travelCarTime&&place.travelDistance&&(0,jsx_runtime.jsx)("div",{className:"w-5 h-5 bg-[url('/icons/Dot.svg')] bg-contain bg-no-repeat"}),place.travelDistance&&(0,jsx_runtime.jsx)("div",{className:"flex items-center gap-2",children:(0,jsx_runtime.jsx)("span",{className:"text-gray-700",children:place.travelDistance})})]})]})},place.id)))})})]})},ScheduleCard=DayScheduleCard;DayScheduleCard.__docgenInfo={description:"",methods:[],displayName:"DayScheduleCard",props:{dailySchedule:{required:!0,tsType:{name:"DailyScheduleDtos"},description:""}}};const ScheduleCard_stories={title:"Example/DayScheduleCard",component:ScheduleCard,tags:["autodocs"]},attractionsData=[{id:1,type:"meal",name:"강릉짬뽕순두부 동화가든 본점",address:"강원 강릉시 강동면 순두부길 77번길 15 동화가든",description:"두부요리 / 예약필수",coverImage:"https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=5dc87836-b647-45ef-ae17-e3247f91b8b4",businessTime:"매일 07:00 ~ 19:30",rating:4.68,latitude:37.751853,longitude:128.896651,travelWalkTime:"10분",travelCarTime:"5분",travelDistance:"1.2km"},{id:2,type:"place",name:"오죽헌",address:"강원 강릉시 율곡로3139번길 24 오죽헌",description:"입장료 있음 / 운영시간 1시간 전 입장 마감",coverImage:"https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=2df9d7f5-bd90-41e5-a59b-334a13f85d7e",businessTime:"09:00 ~ 18:00",rating:4.68,latitude:37.763283,longitude:128.896995,travelWalkTime:"15분",travelCarTime:"5분",travelDistance:"1.2km"},{id:3,type:"place",name:"경포해변",address:"강원 강릉시 강문동 산1",description:"강릉시에 있는 동해안 최대의 해변",coverImage:"https://cdn.visitkorea.or.kr/img/call?cmd=VIEW&id=8ef7b330-fbb0-44c7-94a4-85b2729ff251",businessTime:"00:00 ~ 24:00 상시이용 가능",rating:4.41,latitude:37.803517,longitude:128.924605,travelWalkTime:"20분",travelCarTime:"10분",travelDistance:"3.5km"}],Primary={args:{dailySchedule:{dayDate:3,attractions:attractionsData}}},EmptyPlaces={args:{dailySchedule:{dayDate:2,attractions:[]}}},SinglePlace={args:{dailySchedule:{dayDate:1,attractions:[attractionsData[0]]}}},__namedExportsOrder=["Primary","EmptyPlaces","SinglePlace"];Primary.parameters={...Primary.parameters,docs:{...Primary.parameters?.docs,source:{originalSource:"{\n  args: {\n    dailySchedule: {\n      dayDate: 3,\n      attractions: attractionsData\n    }\n  }\n}",...Primary.parameters?.docs?.source}}},EmptyPlaces.parameters={...EmptyPlaces.parameters,docs:{...EmptyPlaces.parameters?.docs,source:{originalSource:"{\n  args: {\n    dailySchedule: {\n      dayDate: 2,\n      attractions: []\n    }\n  }\n}",...EmptyPlaces.parameters?.docs?.source}}},SinglePlace.parameters={...SinglePlace.parameters,docs:{...SinglePlace.parameters?.docs,source:{originalSource:"{\n  args: {\n    dailySchedule: {\n      dayDate: 1,\n      attractions: [attractionsData[0]]\n    }\n  }\n}",...SinglePlace.parameters?.docs?.source}}}}}]);